[English](README.md)

# Click2Fill

## 概述

Click2Fill 是一个功能强大的思源笔记插件，允许您选择文本，将其发送到配置的 API 端点，并自动将响应附加到文档中。

## 特性

* **文本选择**：选择文档中的任何文本
* **API 集成**：将选中的文本发送到自定义 API 端点
* **动态菜单**：配置多个 API 端点，自定义名称和图标
* **键盘快捷键**：使用 `⇧⌘I`（Shift+Command+I）快速访问
* **附加内容**：结果添加到选中文本之后，而不是替换它
* **URL 验证**：自动为 URL 添加协议前缀
* **自定义模板**：使用简单模板格式化 API 响应

## 安装

1. 从思源笔记集市下载插件
2. 在集市设置中启用插件
3. 配置您的 API 端点（请参阅配置部分）

## 使用方法

1. 在文档中选择文本
2. 按 `⇧⌘I`（Shift+Command+I）
3. 从动态菜单中选择 API 端点
4. API 响应将自动附加到您选择的文本后面

## 配置

1. 在文档中选择文本
2. 按 `⇧⌘I`（Shift+Command+I）
3. 点击菜单中的"配置"选项
4. 添加 API 端点，包括：
   - **名称**：菜单项显示名称
   - **图标**：思源笔记图标集中的图标 ID
   - **URL**：API 端点 URL
   - **方法**：HTTP 方法（GET/POST）
   - **Headers**：自定义头信息（JSON 格式）
   - **Params**：自定义参数（JSON 格式）
   - **响应类型**：如何解析响应
   - **模板**：可选的响应格式化模板

## 开发

### 前提条件

* Node.js (v16+)
* pnpm
* 思源笔记 (v3.1.3+)

### 设置

1. 将仓库克隆到您的本地机器
2. 导航到项目目录
3. 安装依赖：`pnpm i`
4. 启动开发服务器：`pnpm run dev`
5. 插件将被编译并可在思源笔记中使用

### 生产构建

```bash
pnpm run build
```

### 项目结构

```
click2fill/
├── src/
│   ├── i18n/            # 国际化文件
│   │   ├── en_US.json
│   │   └── zh_CN.json
│   ├── index.scss       # 插件样式
│   └── index.ts         # 主插件逻辑
├── icon.png             # 插件图标 (160*160)
├── plugin.json          # 插件配置
├── README.md            # 英文文档
├── README_zh_CN.md      # 中文文档
└── CHANGELOG.md         # 版本历史
```

## 键盘快捷键

* **打开 Click2Fill 菜单**：`⇧⌘I`（Shift+Command+I）

## 示例

### 基本用法

1. 选择文本："获取纽约天气"
2. 打开 Click2Fill 菜单
3. 选择您的天气 API 端点
4. 结果将被附加："获取纽约天气
温度：22°C，天气：晴朗"

### 使用模板

如果您配置了如下模板：
```
温度：${temp}°C，天气：${conditions}
```

并且您的 API 返回：
```json
{"temp": 22, "conditions": "晴朗"}
```

结果将被格式化为：
```
温度：22°C，天气：晴朗
```

## 故障排除

### API 请求失败

1. 检查您的 API URL 配置
2. 确保 URL 有正确的协议（http:// 或 https://）
3. 验证 API 端点是否可访问
4. 检查浏览器控制台以获取详细错误信息

### 菜单不显示

1. 确保在按快捷键之前已选择文本
2. 检查插件是否在思源笔记集市中启用
3. 验证键盘快捷键是否冲突

## 更新日志

请参阅 [CHANGELOG.md](CHANGELOG.md) 了解版本历史。

## 许可证

MIT 许可证